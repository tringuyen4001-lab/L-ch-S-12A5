<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VI·ªÜT NAM TR∆Ø·ªöC V√Ä SAU NƒÇM 1986</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS VARIABLES (BI·∫æN M√ÄU S·∫ÆC) --- */
        :root {
            --primary-color: #7D2808;
            --secondary-color: #333333;
            --background-page: #f9f6f0;
            --background-card: #ffffff;
            --header-font: 'Merriweather', serif;
            --body-font: 'Roboto', sans-serif;
            --zone-before: #C08D73;
            --zone-after: #778899;
        }

        /* --- STYLES CHUNG --- */
        body {
            font-family: var(--body-font);
            background: var(--background-page);
            margin: 0;
            padding: 20px 10px; 
            color: var(--secondary-color);
            line-height: 1.6;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            font-family: var(--header-font);
            font-size: 2.5em; 
            margin-bottom: 5px;
            letter-spacing: 2px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        h3 {
            text-align: center;
            color: #555555;
            font-weight: 400;
            font-size: 1.1em;
            margin-bottom: 30px;
            font-style: italic;
        }
        
        /* --- INPUTS & BUTTON --- */
        .top-box {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        input {
            padding: 12px 15px;
            font-size: 1em;
            border: 2px solid #D7C6B7;
            border-radius: 4px;
            outline: none;
            transition: border-color 0.3s;
            width: 200px;
            background: #ffffff;
        }

        button {
            padding: 12px 25px;
            font-size: 1em;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s, transform 0.1s;
            font-weight: bold;
            letter-spacing: 0.5px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        button:hover { background: #5A1F07; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3); }
        button:active { transform: scale(0.98); }

        /* --- CARD POOL --- */
        .pool {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #F1EFEA;
            border-radius: 8px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
            min-height: 100px;
        }

        /* --- TH·∫∫ (CARD) --- */
        .card {
            padding: 12px 18px; 
            background: var(--background-card);
            border: 1px solid #D4CCC1;
            border-radius: 3px;
            cursor: grab; /* Gi·ªØ cursor: grab cho desktop */
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s, background 0.2s, opacity 0.2s;
            font-size: 0.95em;
            font-weight: 500;
        }

        /* Hi·ªáu ·ª©ng khi th·∫ª ƒë∆∞·ª£c ch·ªçn (Tap-to-move) */
        .card.selected {
            outline: 3px solid #FFD700;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.5);
            cursor: pointer !important; /* Thay ƒë·ªïi cursor khi ch·ªçn */
        }

        /* --- KHU V·ª∞C TH·∫¢ (BOARD) --- */
        .board {
            display: flex;
            justify-content: center;
            gap: 20px; 
            flex-wrap: wrap;
        }

        .zone {
            width: 450px;
            min-height: 350px; 
            padding: 20px;
            border-radius: 8px;
            background: #ffffff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15), 0 0 0 8px #E8E2D7;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px; 
            text-align: center;
            transition: outline 0.3s, background 0.3s;
        }

        .zone h2 {
            font-family: var(--header-font);
            margin-top: 0;
            padding-bottom: 8px;
            font-size: 1.5em;
            font-weight: 700;
            color: var(--primary-color);
            border-bottom: 2px solid #EEE;
            width: 100%;
        }
        
        /* T√¥ s√°ng v√πng th·∫£ khi c√≥ th·∫ª ƒë∆∞·ª£c ch·ªçn (Tap-to-move) */
        .zone.can-drop {
            outline: 4px dashed var(--primary-color);
            background: #ffe3d8;
            cursor: pointer;
        }
        
        /* Highlight khi k√©o qua (Desktop Drag-over) */
        .zone.drag-over {
            box-shadow: 0 4px 20px rgba(125, 40, 8, 0.7), 0 0 0 8px #FFD700;
        }

        .zone:first-child .card, .zone:last-child .card {
            width: 95%;
            text-align: left;
        }

        /* --- RESPONSIVE OPTIMIZATION (√ÅP D·ª§NG CHO M√ÄN H√åNH NH·ªé <= 768px) --- */
        @media (max-width: 768px) {
            body {
                padding: 15px 5px;
            }
            .top-box, .board {
                flex-direction: column;
                align-items: center;
            }
            .zone {
                width: 95%;
                min-height: 250px;
                margin-bottom: 15px;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1), 0 0 0 5px #E8E2D7;
            }
            input, button {
                width: 95%;
                font-size: 0.9em;
            }
            h1 {
                font-size: 1.8em;
            }
            h3 {
                font-size: 1em;
            }
            .card {
                font-size: 0.9em;
                padding: 10px 15px;
                cursor: pointer; /* Thay th·∫ø grab b·∫±ng pointer tr√™n mobile */
            }
        }
    </style>
</head>

<body>

<h1>üìú VI·ªÜT NAM TR∆Ø·ªöC V√Ä SAU NƒÇM 1986 üìú</h1>
<h3>H√£y s·∫Øp x·∫øp c√°c th·∫ª l·ªãch s·ª≠ ƒë√∫ng Tr∆∞·ªõc & Sau 1986</h3>

<form action="https://formsubmit.co/el/YOURCODE" method="POST" onsubmit="return tinhDiemVaGui()">

    <div class="top-box">
        <input type="text" name="ten" id="ten" placeholder="üë§ T√™n ng∆∞·ªùi tham gia" required>
        <input type="email" name="email" placeholder="üìß Email ng∆∞·ªùi l√†m b√†i" required>
        <input type="hidden" name="_to" value="tringuyen4001@gmail.com"> 
        <button type="submit">L∆ØU K·∫æT QU·∫¢ V√ÄO H·ªí S∆† ‚úÖ</button>
    </div>

    <input type="hidden" name="K·∫øt qu·∫£ chi ti·∫øt" id="ketqua">
    <input type="hidden" name="_captcha" value="false">

    <div class="pool" id="pool"></div>

    <div class="board">
        <div class="zone" id="before">
            <h2>TR∆Ø·ªöC 1986</h2>
        </div>
        <div class="zone" id="after">
            <h2>SAU 1986</h2>
        </div>
    </div>
</form>

<script>
const RAW_DATA = [
    {text:"S·∫£n xu·∫•t theo ch·ªâ ti√™u k·∫ø ho·∫°ch", type:"before"}, {text:"S·∫£n xu·∫•t ƒëi·ªÅu ch·ªânh theo nhu c·∫ßu th·ªã tr∆∞·ªùng", type:"after"},
    {text:"Gi√° c·∫£ do Nh√† n∆∞·ªõc ban h√†nh", type:"before"}, {text:"Gi√° c·∫£ h√¨nh th√†nh theo c∆° ch·∫ø th·ªã tr∆∞·ªùng", type:"after"},
    {text:"Doanh nghi·ªáp ch·ªß y·∫øu theo m√¥ h√¨nh qu·ªëc doanh", type:"before"}, {text:"Xu·∫•t hi·ªán nhi·ªÅu lo·∫°i h√¨nh doanh nghi·ªáp kh√°c nhau", type:"after"},
    {text:"Ph√¢n ph·ªëi theo tem phi·∫øu, ƒë·ªãnh m·ª©c", type:"before"}, {text:"Ph√¢n ph·ªëi theo c∆° ch·∫ø mua b√°n", type:"after"},
    {text:"Qu·∫£n l√Ω b·∫±ng ch·ªâ ƒë·∫°o, m·ªánh l·ªánh", type:"before"}, {text:"Qu·∫£n l√Ω h∆∞·ªõng t·ªõi hi·ªáu l·ª±c, ph·ª•c v·ª•, minh b·∫°ch", type:"after"},
    {text:"Quy·∫øt ƒë·ªãnh t·∫≠p trung, √≠t tham v·∫•n", type:"before"}, {text:"V·∫≠n h√†nh theo ph√°p lu·∫≠t, ph√°t huy d√¢n ch·ªß", type:"after"},
    {text:"ƒê·ªùi s·ªëng v·∫≠t ch·∫•t v√† tinh th·∫ßn h·∫°n ch·∫ø", type:"before"}, {text:"ƒê·ªùi s·ªëng v·∫≠t ch·∫•t v√† tinh th·∫ßn ƒëa d·∫°ng h∆°n", type:"after"},
    {text:"C∆° h·ªôi h·ªçc t·∫≠p, ngh·ªÅ nghi·ªáp b·ªã h·∫°n ch·∫ø", type:"before"}, {text:"C∆° h·ªôi h·ªçc t·∫≠p, ngh·ªÅ nghi·ªáp ƒë∆∞·ª£c m·ªü r·ªông", type:"after"},
    {text:"Ho·∫°t ƒë·ªông vƒÉn h√≥a theo khu√¥n m·∫´u t·∫≠p trung", type:"before"}, {text:"ƒê·ªùi s·ªëng vƒÉn h√≥a phong ph√∫, s√°ng t·∫°o", type:"after"},
    {text:"C·ªßng c·ªë an ninh trong ƒëi·ªÅu ki·ªán kh√≥ khƒÉn", type:"before"}, {text:"Qu·ªëc ph√≤ng, an ninh c·ªßng c·ªë ƒë·ªìng b·ªô", type:"after"},
    {text:"ƒê·ªëi ngo·∫°i thi√™n v·ªÅ t·ª± l·ª±c, kh√©p k√≠n", type:"before"}, {text:"ƒê·ªëi ngo·∫°i ƒëa ph∆∞∆°ng h√≥a, m·ªü r·ªông h·ª£p t√°c", type:"after"},
    {text:"Vi·ªác l√†m ph·ª• thu·ªôc v√†o ph√¢n b·ªï h·ªá th·ªëng", type:"before"}, {text:"Thu nh·∫≠p ƒë·∫øn t·ª´ th·ªã tr∆∞·ªùng v√† doanh nghi·ªáp", type:"after"}
];

const pool = document.getElementById("pool");
const zoneBefore = document.getElementById("before");
const zoneAfter = document.getElementById("after");
const zones = document.querySelectorAll('.zone');

let selectedCard = null; 
// Ki·ªÉm tra xem thi·∫øt b·ªã c√≥ ph·∫£i l√† di ƒë·ªông (m√†n h√¨nh h·∫πp) hay kh√¥ng
let isMobile = window.matchMedia("(max-width: 768px)").matches; 

// --- Kh·ªüi t·∫°o Th·∫ª v√† G·∫Øn Events ---
function initializeCards() {
    pool.innerHTML = '';
    const randomizedData = [...RAW_DATA].sort(() => Math.random() - 0.5);

    randomizedData.forEach((item, i) => {
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = item.text;
        div.draggable = !isMobile; // Ch·ªâ cho ph√©p k√©o th·∫£ n·∫øu kh√¥ng ph·∫£i mobile
        div.dataset.type = item.type;
        div.id = "card" + i;

        // B·ªï sung s·ª± ki·ªán k√©o th·∫£ cho Desktop
        if (!isMobile) {
            div.addEventListener("dragstart", e => {
                e.dataTransfer.setData("id", div.id);
                div.classList.add('dragging');
            });
            div.addEventListener("dragend", e => {
                div.classList.remove('dragging');
            });
        }
        
        // G·∫Øn s·ª± ki·ªán click/tap cho c·∫£ hai n·ªÅn t·∫£ng (s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω kh√°c nhau trong handleCardClick)
        div.addEventListener('click', handleCardClick);

        pool.appendChild(div);
    });
}
initializeCards();


// --- LOGIC NH·∫§N ƒê·ªÇ DI CHUY·ªÇN (TAP-TO-MOVE) CHO DI ƒê·ªòNG ---

function highlightZones(shouldHighlight) {
    zones.forEach(zone => {
        if (shouldHighlight) {
            zone.classList.add('can-drop');
        } else {
            zone.classList.remove('can-drop');
        }
    });
    // T√¥ s√°ng pool khi c√≥ th·∫ª ƒë∆∞·ª£c ch·ªçn
    if (shouldHighlight) {
        pool.classList.add('can-drop');
    } else {
        pool.classList.remove('can-drop');
    }
}

function handleCardClick(e) {
    // Lu√¥n cho ph√©p ng∆∞·ªùi d√πng desktop click ƒë·ªÉ h·ªßy ch·ªçn/ch·ªçn th·∫ª, nh∆∞ng kh√¥ng thay th·∫ø K√©o-th·∫£
    if (!isMobile) {
        // N·∫øu l√† Desktop, ch·ªâ d√πng click ƒë·ªÉ select (ch·∫ø ƒë·ªô tap-to-move ·∫©n)
        if (selectedCard) selectedCard.classList.remove('selected');
        selectedCard = e.currentTarget;
        selectedCard.classList.add('selected');
        setTimeout(() => {
            selectedCard.classList.remove('selected');
            selectedCard = null;
        }, 500); // T·ª± h·ªßy ch·ªçn nhanh ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng K√©o-th·∫£
        return;
    }

    // X·ª≠ l√Ω Mobile (Tap-to-move)
    const card = e.currentTarget;
    
    if (selectedCard === card) {
        // H·ªßy ch·ªçn
        card.classList.remove('selected');
        selectedCard = null;
        highlightZones(false);
    } else {
        // Ch·ªçn th·∫ª m·ªõi
        if (selectedCard) {
            selectedCard.classList.remove('selected');
        }
        selectedCard = card;
        card.classList.add('selected');
        highlightZones(true);
    }
}

function handleZoneClick(e) {
    // N·∫øu kh√¥ng c√≥ th·∫ª n√†o ƒë∆∞·ª£c ch·ªçn ho·∫∑c ƒëang ·ªü ch·∫ø ƒë·ªô desktop (d√πng k√©o th·∫£), tho√°t
    if (!selectedCard || !isMobile) return;

    const dropZone = e.currentTarget.closest('.zone') || e.currentTarget.closest('.pool');
    
    if (dropZone) {
        // Di chuy·ªÉn th·∫ª
        dropZone.appendChild(selectedCard);
        
        // H·ªßy tr·∫°ng th√°i ƒë√£ ch·ªçn
        selectedCard.classList.remove('selected');
        selectedCard = null;
        highlightZones(false);
    }
}

// G·∫Øn s·ª± ki·ªán click/tap cho c√°c khu v·ª±c th·∫£ v√† pool
zones.forEach(zone => {
    zone.addEventListener('click', handleZoneClick);
});
pool.addEventListener('click', handleZoneClick);


// --- LOGIC K√âO TH·∫¢ TRUY·ªÄN TH·ªêNG (D√ÄNH CHO DESKTOP) ---

function allowDrop(e){ 
    if (isMobile) return;
    e.preventDefault(); 
    let targetZone = e.target.closest('.zone');
    if (targetZone) {
        targetZone.classList.add('drag-over');
    }
}

function dragLeave(e) {
    if (isMobile) return;
    let targetZone = e.target.closest('.zone');
    if (targetZone) {
        let rect = targetZone.getBoundingClientRect();
        if (e.clientX < rect.left || e.clientX > rect.right || e.clientY < rect.top || e.clientY > rect.bottom) {
            targetZone.classList.remove('drag-over');
        }
    }
}

function drop(e){
    if (isMobile) return;
    e.preventDefault();
    const id = e.dataTransfer.getData("id");
    const draggedElement = document.getElementById(id);
    let dropZone = e.target.closest('.zone') || e.target.closest('.pool');

    if (dropZone && draggedElement) {
        dropZone.appendChild(draggedElement);
        dropZone.classList.remove('drag-over');
    }
}

// G·∫Øn s·ª± ki·ªán k√©o th·∫£ cho Desktop
if (!isMobile) {
    zones.forEach(zone => {
        zone.ondrop = drop;
        zone.ondragover = allowDrop;
        zone.ondragleave = dragLeave;
    });
    pool.ondrop = drop;
    pool.ondragover = allowDrop;
    pool.ondragleave = dragLeave;
}


// --- Ch·ª©c nƒÉng Ch·∫•m ƒëi·ªÉm v√† G·ª≠i form ---
function tinhDiemVaGui(){
    let dung = 0;
    let tong = RAW_DATA.length;
    let tenNguoiChoi = document.getElementById("ten").value || "Kh√°ch ·∫©n danh";
    let emailNguoiChoi = document.getElementById("email").value || "Kh√¥ng cung c·∫•p";
    
    let kqEmail = `K·∫æT QU·∫¢ CHI TI·∫æT C·ª¶A ${tenNguoiChoi} (${emailNguoiChoi}):\n\n`;
    
    if (pool.children.length > 0) {
        alert("Vui l√≤ng s·∫Øp x·∫øp t·∫•t c·∫£ c√°c th·∫ª v√†o hai c·ªôt TR∆Ø·ªöC ho·∫∑c SAU 1986 tr∆∞·ªõc khi g·ª≠i!");
        return false;
    }

    zoneBefore.querySelectorAll(".card").forEach(c => {
        let ok = c.dataset.type === "before";
        if(ok) dung++;
        kqEmail += "TR∆Ø·ªöC 1986: " + c.textContent + " | " + (ok ? "ƒê√öNG" : "SAI") + "\n";
    });

    zoneAfter.querySelectorAll(".card").forEach(c => {
        let ok = c.dataset.type === "after";
        if(ok) dung++;
        kqEmail += "SAU 1986: " + c.textContent + " | " + (ok ? "ƒê√öNG" : "SAI") + "\n";
    });

    kqEmail += "\n--- T·ªîNG K·∫æT ---\n";
    kqEmail += `T·ªîNG ƒê√öNG: ${dung}/${tong}\n`;
    kqEmail += `T·ªîNG SAI: ${tong - dung}\n`;
    kqEmail += `ƒêI·ªÇM S·ªê: ${(dung / tong * 10).toFixed(2)} / 10.00`;

    document.getElementById("ketqua").value = kqEmail;
    
    alert(`Ho√†n th√†nh, ${tenNguoiChoi}! B·∫°n ƒë·∫°t ${dung}/${tong} c√¢u ƒë√∫ng. K·∫øt qu·∫£ chi ti·∫øt ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o h·ªì s∆°.`);

    return true;
}
window.tinhDiemVaGui = tinhDiemVaGui;

</script>

</body>
</html>